import{j as e,a as c,b as C,r as m,f as _,c as g,s as N,d as k,M as w,i as I}from"./index-CDFVGsld.js";import{s as y,a as $,b as P,u as E,c as x,d as v,g as q,e as S,f as O,h as M,C as T}from"./CamperList-BNxr0Tlw.js";const D="_btn_deoui_1",R={btn:D};function V({action:n}){return e.jsx("button",{type:"button",onClick:n,className:R.btn,children:"Load more"})}const A="_form_zf8xq_1",B="_backdrop_zf8xq_17",K="_filters_zf8xq_31",G="_label_zf8xq_45",H="_bigLabel_zf8xq_59",J="_input_zf8xq_71",Q="_mapIcon_zf8xq_117",U="_icon_zf8xq_129",W="_radioLabel_zf8xq_155",X="_options_zf8xq_185",Y="_radioInput_zf8xq_197",Z="_name_zf8xq_213",ee="_separator_zf8xq_227",se="_container_zf8xq_239",ae="_inputContainer_zf8xq_251",te="_controls_zf8xq_265",s={form:A,backdrop:B,filters:K,label:G,bigLabel:H,input:J,mapIcon:Q,icon:U,radioLabel:W,options:X,radioInput:Y,name:Z,separator:ee,container:se,inputContainer:ae,controls:te},ne=["AC","automatic","kitchen","TV","shower"],ce=["panelTruck","fullyIntegrated","alcove","all"],oe=({onClose:n})=>{const u=c(y),o=c($),r=c(P),t=C(),{register:l,handleSubmit:i,reset:f}=E(),h=a=>{t(g()),t(N(a))},d=()=>{f(),t(N({})),t(g()),t(_({page:1,limit:o,filters:{}})),t(k(2))};m.useEffect(()=>{Object.keys(r).length>0&&t(_({page:u,limit:o,filters:r}))},[t,u,o,r]);const p=m.useRef(null),F=a=>{p.current&&!p.current.contains(a.target)&&n()},j=a=>{a.key==="Escape"&&n()};return m.useEffect(()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}),[n]),e.jsx("div",{className:s.backdrop,onClick:F,children:e.jsx("div",{className:s.filters,ref:p,children:e.jsxs("form",{onSubmit:i(h),className:s.form,children:[e.jsxs("div",{className:s.inputContainer,children:[e.jsx("p",{className:s.label,children:"Location"}),e.jsx("input",{type:"text",...l("location"),placeholder:"City",className:s.input}),e.jsx("svg",{className:s.mapIcon,width:"18",height:"20","aria-label":"pin icon",children:e.jsx("use",{href:`${x}#icon-map-pin`})})]}),e.jsxs("div",{className:s.inputContainer,children:[e.jsx("p",{className:s.label,children:"Filters"}),e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.bigLabel,children:"Vehicle equipment"}),e.jsx("div",{className:s.separator}),e.jsx("div",{className:s.options,children:ne.map((a,b)=>e.jsxs("div",{className:s.radioOption,children:[e.jsx("input",{id:a,type:"checkbox",...l(`equipment.${a}`),className:s.radioInput}),e.jsxs("label",{htmlFor:a,className:s.radioLabel,children:[e.jsx("svg",{className:s.icon,width:"40",height:"28","aria-label":`${a} icon`,children:e.jsx("use",{href:`${x}#icon-${a}`})}),e.jsx("p",{className:s.name,children:v(q(a))})]})]},b))})]})]}),e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.bigLabel,children:"Vehicle Type"}),e.jsx("div",{className:s.separator}),e.jsx("div",{className:s.options,children:ce.map((a,b)=>e.jsxs("div",{className:s.radioOption,children:[e.jsx("input",{type:"radio",id:`radio-${a}`,...l("type"),value:a,className:s.radioInput}),e.jsxs("label",{htmlFor:`radio-${a}`,className:s.radioLabel,children:[e.jsx("svg",{className:s.icon,width:"40",height:"28","aria-label":`${a} icon`,children:e.jsx("use",{href:`${x}#icon-${a}`})}),e.jsx("p",{className:s.name,children:v(q(a))})]})]},b))})]}),e.jsxs("div",{className:s.controls,children:[e.jsx("button",{type:"submit",children:"Search"}),e.jsx("div",{className:s.separator}),e.jsx("button",{onClick:d,children:"Show all campers"})]})]})})})},ie=oe,re="_layout_r73e8_1",le="_content_r73e8_13",L={layout:re,content:le},de="_btn_1ugd2_1",pe="_icon_1ugd2_15",z={btn:de,icon:pe};function me({action:n}){return e.jsx("div",{children:e.jsx("button",{className:z.btn,onClick:n,children:e.jsx("svg",{className:z.icon,width:"20",height:"20","aria-label":"pin icon",children:e.jsx("use",{href:`${x}#icon-filter`})})})})}function xe(){const n=c(S),u=c(y),o=c($),r=c(O),t=c(P),l=c(M),i=C();m.useEffect(()=>{i(_({page:1,limit:o})),i(k(2))},[]);const f=()=>{i(_({page:u,limit:o,filters:t})),i(I())},[h,d]=m.useState(!1),p=()=>{d(!h)};return e.jsxs("div",{className:L.layout,children:[h&&e.jsx(ie,{onClose:()=>d(!1)}),e.jsxs("div",{className:L.content,children:[e.jsx(me,{action:p}),l?e.jsx(w,{children:e.jsx("h2",{children:"No campers found for your request"})}):e.jsx(T,{campers:n}),r&&e.jsx(V,{action:f})]})]})}export{xe as default};

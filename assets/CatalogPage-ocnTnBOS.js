import{j as e,a as c,b as y,r as p,f as _,c as f,s as N,d as $,M as E,i as S}from"./index-Dw5WWbDC.js";import{s as P,a as F,b as w,u as O,c as x,d as v,g as L,e as M,f as T,h as q,C as D}from"./CamperList-DweTfwS5.js";const R="_btn_deoui_1",V={btn:R};function A({action:n}){return e.jsx("button",{type:"button",onClick:n,className:V.btn,children:"Load more"})}const B="_form_1amxg_1",K="_backdrop_1amxg_17",z="_filters_1amxg_31",G="_label_1amxg_45",H="_bigLabel_1amxg_59",J="_input_1amxg_71",Q="_mapIcon_1amxg_117",U="_icon_1amxg_129",W="_radioLabel_1amxg_155",X="_options_1amxg_185",Y="_radioInput_1amxg_197",Z="_name_1amxg_213",ee="_separator_1amxg_227",se="_container_1amxg_239",ae="_inputContainer_1amxg_251",te="_controls_1amxg_265",s={form:B,backdrop:K,filters:z,label:G,bigLabel:H,input:J,mapIcon:Q,icon:U,radioLabel:W,options:X,radioInput:Y,name:Z,separator:ee,container:se,inputContainer:ae,controls:te},ne=["AC","automatic","kitchen","TV","shower"],ce=["panelTruck","fullyIntegrated","alcove","all"],oe=({onClose:n})=>{const u=c(P),o=c(F),r=c(w),t=y(),{register:l,handleSubmit:i,reset:g}=O(),h=a=>{t(f()),t(N(a))},d=()=>{g(),t(N({})),t(f()),t(_({page:1,limit:o,filters:{}})),t($(2))};p.useEffect(()=>{Object.keys(r).length>0&&t(_({page:u,limit:o,filters:r}))},[t,u,o,r]);const m=p.useRef(null),I=a=>{m.current&&!m.current.contains(a.target)&&n()},j=a=>{a.key==="Escape"&&n()};return p.useEffect(()=>(document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}),[n]),e.jsx("div",{className:s.backdrop,onClick:I,children:e.jsx("div",{className:s.filters,ref:m,children:e.jsxs("form",{onSubmit:i(h),className:s.form,children:[e.jsxs("div",{className:s.inputContainer,children:[e.jsx("p",{className:s.label,children:"Location"}),e.jsx("input",{type:"text",...l("location"),placeholder:"City",className:s.input}),e.jsx("svg",{className:s.mapIcon,width:"18",height:"20","aria-label":"pin icon",children:e.jsx("use",{href:`${x}#icon-map-pin`})})]}),e.jsxs("div",{className:s.inputContainer,children:[e.jsx("p",{className:s.label,children:"Filters"}),e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.bigLabel,children:"Vehicle equipment"}),e.jsx("div",{className:s.separator}),e.jsx("div",{className:s.options,children:ne.map((a,b)=>e.jsxs("div",{className:s.radioOption,children:[e.jsx("input",{id:a,type:"checkbox",...l(`equipment.${a}`),className:s.radioInput}),e.jsxs("label",{htmlFor:a,className:s.radioLabel,children:[e.jsx("svg",{className:s.icon,width:"40",height:"28","aria-label":`${a} icon`,children:e.jsx("use",{href:`${x}#icon-${a}`})}),e.jsx("p",{className:s.name,children:v(L(a))})]})]},b))})]})]}),e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.bigLabel,children:"Vehicle Type"}),e.jsx("div",{className:s.separator}),e.jsx("div",{className:s.options,children:ce.map((a,b)=>e.jsxs("div",{className:s.radioOption,children:[e.jsx("input",{type:"radio",id:`radio-${a}`,...l("type"),value:a,className:s.radioInput}),e.jsxs("label",{htmlFor:`radio-${a}`,className:s.radioLabel,children:[e.jsx("svg",{className:s.icon,width:"40",height:"28","aria-label":`${a} icon`,children:e.jsx("use",{href:`${x}#icon-${a}`})}),e.jsx("p",{className:s.name,children:v(L(a))})]})]},b))})]}),e.jsxs("div",{className:s.controls,children:[e.jsx("button",{type:"submit",children:"Search"}),e.jsx("div",{className:s.separator}),e.jsx("button",{onClick:d,children:"Show all campers"})]})]})})})},ie=oe,re="_layout_r73e8_1",le="_content_r73e8_13",C={layout:re,content:le},de="_btn_1ugd2_1",me="_icon_1ugd2_15",k={btn:de,icon:me};function pe({action:n}){return e.jsx("div",{children:e.jsx("button",{className:k.btn,onClick:n,children:e.jsx("svg",{className:k.icon,width:"20",height:"20","aria-label":"pin icon",children:e.jsx("use",{href:`${x}#icon-filter`})})})})}function xe(){const n=c(M),u=c(P),o=c(F),r=c(T),t=c(w),l=c(q),i=y();p.useEffect(()=>{i(_({page:1,limit:o})),i($(2))},[]);const g=()=>{i(_({page:u,limit:o,filters:t})),i(S())},[h,d]=p.useState(!1),m=()=>{d(!h)};return e.jsxs("div",{className:C.layout,children:[h&&e.jsx(ie,{onClose:()=>d(!1)}),e.jsxs("div",{className:C.content,children:[e.jsx(pe,{action:m}),l?e.jsx(E,{children:e.jsx("h2",{children:"No campers found for your request"})}):e.jsx(D,{campers:n}),r&&e.jsx(A,{action:g})]})]})}export{xe as default};
